<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Caso_Produto_Trocado_Qtd_Diferente_1</fullName>
    <active>false</active>
    <description>Regras referente a status do caso tipo Produto trocado Quantidades diferentes</description>
    <errorConditionFormula>OR(          
	AND(



		ISNEW(),
		RecordType.Name = &apos;Produto trocado&apos;,
		NOT (ISPICKVAL( Type , &apos;Quantidades diferentes&apos;)),
		IF(NOT(ISPICKVAL(Status, &apos;Aguardando retorno transportadora&apos;)), true, false) 
	),
	AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Aguardando retorno trasportadora&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Aguardando retorno trasportadora&apos;), 
		ISPICKVAL(Status, &apos;Em análise&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	),AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Em análise&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Em análise&apos;), 
		ISPICKVAL(Status, &apos;Ordem de substituição criada&apos;), 
		ISPICKVAL(Status, &apos;Ordem de reposição criada&apos;), 
		ISPICKVAL(Status, &apos;Aguardando nota fiscal de devolução&apos;), 
		ISPICKVAL(Status, &apos;Ordem de refaturamento criada&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	),AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Ordem de reposição criada&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Ordem de reposição criada&apos;), 
		ISPICKVAL(Status, &apos;Em análise&apos;), 
		ISPICKVAL(Status, &apos;QM em andamento&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	),AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Aguardando nota fiscal de devolução&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Aguardando nota fiscal de devolução&apos;), 
		ISPICKVAL(Status, &apos;Ordem de devolução simbólica criada&apos;), 
		ISPICKVAL(Status, &apos;Em análise&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	),AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Ordem de refaturamento criada&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Ordem de refaturamento criada&apos;), 
		ISPICKVAL(Status, &apos;Ordem de devolução criada&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	),AND(
		RecordType.Name = &apos;Produto trocado&apos;,
		ISPICKVAL( Type , &apos;Quantidades diferentes&apos;),
		IF( ISPICKVAL( PRIORVALUE(Status) , &apos;Ordem de devolução criada&apos;), 
		IF(NOT(OR(ISPICKVAL(Status, &apos;Ordem de devolução criada&apos;), 
		ISPICKVAL(Status, &apos;Em análise&apos;), 
		ISPICKVAL(Status, &apos;QM em andamento&apos;), 
		ISPICKVAL(Status, &apos;Cancelado&apos;))) , true, false) , false) 
	)
)</errorConditionFormula>
    <errorMessage>Produto trocado Quantidades diferentes: alteração de status não permitida.</errorMessage>
</ValidationRule>
